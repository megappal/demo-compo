<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
  <title>PRODUCTION MEGAPPAL PROJECT</title>
  <style>
    body {
      background: #15141a;
      color: #eee;
      font-family: 'Montserrat', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      padding: 0 10px 40px 10px;
      box-sizing: border-box;
      overflow-x: hidden;
    }
    .main-card {
      max-width: 1050px;
      width: 100%;
      margin: 40px auto 10px auto;
      border-radius: 16px;
      background: #191a1f;
      box-shadow: 0 4px 32px #000a;
      padding: 32px;
      display: flex;
      align-items: flex-start;
      gap: 40px;
      position: relative;
      box-sizing: border-box;
    }
    .side-left {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }
    .side-left img {
      max-width: 270px;
      width: 100%;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 2px 14px #0008;
    }
    .side-right {
      flex: 2;
      min-width: 0;
      display: flex;
      flex-direction: column;
      padding-right: 60px;
    }
    .side-right.cta-align { justify-content: center; }
    
    .song-title {
      color: #16f2a0;
      font-size: 1.8em;
      font-weight: bold;
      margin-bottom: 12px;
      line-height: 1.2;
    }
    .song-desc {
      color: #ccc;
      margin-bottom: 16px;
      font-size: 1em;
      white-space: normal;
    }
    
    .fiche {
      background: #23232b;
      border-radius: 14px;
      padding: 17px 23px;
      color: #eee;
      font-size: 1em;
      margin-top: 18px;
      box-shadow: 0 2px 20px #0004;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    .fiche .lead {
      color: #16f2a0;
      font-weight: bold;
      margin-bottom: 9px;
      display: block;
    }

    /* Contr√¥les */
    .arrow-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: #262636;
      color: #27ffd6;
      border: none;
      border-radius: 50%;
      width: 120px;
      height: 120px;
      font-size: 5em;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10;
      transition: background 0.18s;
    }
    .arrow-btn::after {
      content: "";
      position: absolute;
      top: -10px; left: -10px; right: -10px; bottom: -10px;
      border: 4px solid #27ffd6;
      border-radius: 50%;
    }
    .arrow-btn.left { left: -60px; }
    .arrow-btn.right { right: -60px; }

    .audio-controls-container {
      position: absolute;
      top: 20px;
      right: 20px;
      z-index: 20;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .mute-toggle-btn {
      background: #23232b;
      border: 2px solid #27ffd6;
      color: #27ffd6;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 2em;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .loader {
      width: 30px;
      height: 30px;
      border: 3px solid #23232b;
      border-top: 3px solid #27ffd6;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      display: none;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    .footer { text-align: center; color: #aaa; padding: 20px 0; font-weight: 600; }

    /* CTA final */
    .cta-columns { display: flex; gap: 20px; text-align: left; }
    .cta-action { font-size: 1.6em; font-weight: 900; margin: 15px auto !important; padding: 10px 20px; background: #34efb6; color: #191a1f; border-radius: 8px; display: inline-block; }
    .cta-box { margin-top: 15px; padding: 15px 25px; background: #27ffd6; border-radius: 12px; text-align: center; color: #191a1f; }

    /* Correction Mobile */
    @media (max-width: 1150px) { .arrow-btn.left { left: 10px; } .arrow-btn.right { right: 10px; } }
    @media (max-width: 900px) {
      .main-card { flex-direction: column !important; align-items: center !important; padding: 60px 20px 20px 20px; }
      .side-left { width: 100% !important; display: block !important; text-align: center !important; margin-bottom: 10px; }
      .side-left img { display: inline-block !important; margin: 0 auto !important; max-width: 250px; }
      .side-right { width: 100% !important; padding-right: 0 !important; text-align: left; }
      .arrow-btn { width: 70px; height: 70px; font-size: 2.5em; top: 40%; }
      .arrow-btn::after { top: -5px; left: -5px; right: -5px; bottom: -5px; border-width: 3px; }
      .song-title { font-size: 1.4em; text-align: center; }
      .cta-columns { flex-direction: column; }
    }
  </style>
</head>
<body>

  <div id="demo-container"></div>
  <div class="footer">Une production de Megappal Project<br />D√©mos priv√©es ‚Äî acc√®s sur invitation</div>

  <script>
    const demos = [
      {
        title: "Ici, la musique commence par une histoire.",
        desc: "Chaque chanson est compos√©e sur mesure par <b>Megappal Project</b>.",
        img: "studio-photo.jpg", mp3: null, fiche: "üëâ Appuyez sur la fl√®che pour explorer nos d√©mos",
      },
      {
        title: "Rayon de Soleil pour Julie",
        desc: "D√©mo personnalis√©e en fran√ßais pour Julie.",
        img: "0001-Rayon de Soleil (pour Julie).jpg", mp3: "0001-Rayon de Soleil (pour Julie).mp3",
        fiche: `<b>Personne f√™t√©e :</b> Julie Tremblay<br><b>√Çge c√©l√©br√© :</b> 30 ans<br><b>Style :</b> Pop acoustique<br><b>D√©tails :</b> Adore les voyages et son chat L√©o.<br><b>Message :</b> ‚ÄúNe change jamais.‚Äù`,
      },
      {
        title: "Le Roi du BBQ (pour Sam)",
        desc: "Hommage BBQ pour Sam.",
        img: "0002-Le Roi du BBQ (pour Sam).jpg", mp3: "0002-Le Roi du BBQ (pour Sam).mp3",
        fiche: `<b>Personne f√™t√©e :</b> Samuel Dub√©<br><b>√Çge :</b> 25 ans<br><b>Style :</b> Pop-rock<br><b>D√©tails :</b> Toujours en retard, passionn√© de p√™che.<br><b>Message :</b> ‚ÄúT‚Äôes le roi du BBQ.‚Äù`,
      },
      {
        title: "Mon Roc, Mon Aventure (pour Marc-Andr√©)",
        desc: "D√©mo d√©di√©e √† Marc-Andr√©.",
        img: "0003-Mon Roc, Mon Aventure (pour Marc-Andr√©).jpg", mp3: "0003-Mon Roc, Mon Aventure (pour Marc-Andr√©).mp3",
        fiche: `<b>Personne f√™t√©e :</b> Marc-Andr√© Lavoie<br><b>√Çge :</b> 40 ans<br><b>Style :</b> Ballade pop<br><b>D√©tails :</b> Bricoleur, p√®re de deux enfants.<br><b>Message :</b> ‚ÄúTu restes mon roc.‚Äù`,
      },
      {
        title: "50 Ans de L√©gende (pour Pat)",
        desc: "D√©mo anniversaire pour Pat.",
        img: "0004-50 Ans de L√©gende (pour Pat).jpg", mp3: "0004-50 Ans de L√©gende (pour Pat).mp3",
        fiche: `<b>Personne f√™t√©e :</b> Patrick Lemieux<br><b>√Çge :</b> 50 ans<br><b>Style :</b> Rock‚Äôn‚Äôroll<br><b>D√©tails :</b> Fan d‚ÄôElvis et de Harley.<br><b>Message :</b> ‚Äú50 ans de l√©gende !‚Äù`,
      },
      {
        title: "R√™ve Grand, Ma Petite √âtoile (pour Zo√©)",
        desc: "D√©mo magique pour Zo√©.",
        img: "0005-R√™ve Grand, Ma Petite √âtoile (pour Zo√©).jpg", mp3: "0005-R√™ve Grand, Ma Petite √âtoile (pour Zo√©).mp3",
        fiche: `<b>Personne f√™t√©e :</b> Zo√© Fortin<br><b>√Çge :</b> 10 ans<br><b>Style :</b> Pop joyeux (Disney)<br><b>D√©tails :</b> Aime les licornes et la danse.<br><b>Message :</b> ‚ÄúR√™ve grand.‚Äù`,
      },
      {
        title: "Caf√© & Lundi (pour Annie)",
        desc: "Rituel de bureau pour Annie.",
        img: "0006-Caf√© & Lundi (pour Annie).jpg", mp3: "0006-Caf√© & Lundi (pour Annie).mp3",
        fiche: `<b>Personne f√™t√©e :</b> Annie Bouchard<br><b>√Çge :</b> 35 ans<br><b>Style :</b> Jazz-swing<br><b>D√©tails :</b> Adore le caf√© et le sarcasme.<br><b>Message :</b> ‚ÄúAnnie sans caf√©, c‚Äôest impossible.‚Äù`,
      },
      {
        title: "Le Rire des Vagues (pour Jean)",
        desc: "Vagues et souvenirs pour Jean.",
        img: "0007-Le Rire des Vagues (pour Jean).jpg", mp3: "0007-Le Rire des Vagues (pour Jean).mp3",
        fiche: `<b>Personne f√™t√©e :</b> Jean Leblanc<br><b>√Çge :</b> 60 ans<br><b>Style :</b> Folk acoustique<br><b>D√©tails :</b> Ancien marin, aime sa guitare.<br><b>Message :</b> ‚ÄúTon rire fait danser les vagues.‚Äù`,
      },
      {
        title: "Le Monde Est √† Toi (pour Clara)",
        desc: "D√©mo motivation pour Clara.",
        img: "0008-Le Monde Est √† Toi (pour Clara).jpg", mp3: "0008-Le Monde Est √† Toi (pour Clara).mp3",
        fiche: `<b>Personne f√™t√©e :</b> Clara C√¥t√©<br><b>√Çge :</b> 18 ans<br><b>Style :</b> Pop √©lectro<br><b>D√©tails :</b> Passionn√©e de photo et voyage.<br><b>Message :</b> ‚ÄúLe monde est √† toi.‚Äù`,
      },
      {
        title: "Plus Que Les P√¢tes du Monde (pour M√©lanie)",
        desc: "D√©mo gourmande pour M√©lanie.",
        img: "0009-Plus Que Les P√¢tes du Monde (pour M√©lanie).jpg", mp3: "0009-Plus Que Les P√¢tes du Monde (pour M√©lanie).mp3",
        fiche: `<b>Personne f√™t√©e :</b> M√©lanie Girard<br><b>√Çge :</b> 28 ans<br><b>Style :</b> Pop romantique<br><b>D√©tails :</b> Aime les couchers de soleil et l'Italie.<br><b>Message :</b> ‚ÄúJe t‚Äôaime plus que les p√¢tes.‚Äù`,
      },
      {
        title: "Ma Petite Tornade (pour L√©a)",
        desc: "Tornade d‚Äôamour pour L√©a.",
        img: "0010-Ma Petite Tornade (pour lea).jpg", mp3: "0010-Ma Petite Tornade (pour lea).mp3",
        fiche: `<b>Personne f√™t√©e :</b> L√©a Dion<br><b>√Çge :</b> 5 ans<br><b>Style :</b> Pop enfant<br><b>D√©tails :</b> Aime les arcs-en-ciel et les bulles.<br><b>Message :</b> ‚ÄúMa petite tornade d‚Äôamour.‚Äù`,
      },
      {
        title: "CR√âEZ VOTRE CADEAU ULTIME.",
        desc: "Un souvenir qui dure pour toujours.",
        img: "cta-image.jpg", mp3: "exit-song.mp3",
        fiche: `<div class="cta-columns"><div>‚òÖ 100% Personnalis√© par <b>Megappal Project</b>.<br>‚òÖ Unicit√© Garantie.</div></div>
                <div class="cta-box"><p class="cta-action">PARLEZ-EN √Ä UN EMPLOY√â !</p></div>`,
      }
    ];

    const audioObjects = {};
    let idx = 0;
    let isGlobalMuted = false;

    function getAudio(index) {
      if (!demos[index] || !demos[index].mp3) return null;
      if (!audioObjects[index]) {
        const audio = new Audio();
        audio.preload = "auto";
        audio.src = demos[index].mp3;
        audio.addEventListener('waiting', () => { if(document.getElementById('audio-loader')) document.getElementById('audio-loader').style.display = 'block'; });
        audio.addEventListener('playing', () => { if(document.getElementById('audio-loader')) document.getElementById('audio-loader').style.display = 'none'; });
        audio.load();
        audioObjects[index] = audio;
      }
      return audioObjects[index];
    }

    function toggleMute() {
      isGlobalMuted = !isGlobalMuted;
      const current = getAudio(idx);
      const btn = document.getElementById('mute-btn');
      if (current) current.muted = isGlobalMuted;
      if (btn) btn.textContent = isGlobalMuted ? "üîá" : "üîä";
    }

    function renderDemo(index) {
      const d = demos[index];
      Object.values(audioObjects).forEach(a => { a.pause(); a.currentTime = 0; });

      const audioControls = d.mp3 ? `<div class="audio-controls-container"><div class="loader" id="audio-loader"></div><button class="mute-toggle-btn" id="mute-btn" onclick="toggleMute()">${isGlobalMuted ? "üîá" : "üîä"}</button></div>` : '';

      document.getElementById('demo-container').innerHTML = `
        <div class="main-card">
          <button class="arrow-btn left" onclick="changeDemo(-1)">&lt;</button>
          ${audioControls}
          <div class="side-left"><img src="${d.img}" alt="${d.title}"></div>
          <div class="side-right ${!d.mp3 ? 'cta-align' : ''}">
            <div class="song-title">${d.title}</div>
            <div class="song-desc">${d.desc}</div>
            <div class="fiche">${index === 0 ? d.fiche : (index === demos.length - 1 ? d.fiche : `<span class="lead">Exemple de fiche personnalis√©e</span>${d.fiche}`)}</div>
          </div>
          <button class="arrow-btn right" onclick="changeDemo(1)">&gt;</button>
        </div>`;

      document.querySelector('.arrow-btn.left').style.visibility = (index === 0) ? 'hidden' : 'visible';
      document.querySelector('.arrow-btn.right').style.visibility = (index === demos.length - 1) ? 'hidden' : 'visible';

      const currentAudio = getAudio(index);
      if (currentAudio) { currentAudio.muted = isGlobalMuted; currentAudio.play().catch(e => {}); }
      if (index + 1 < demos.length) getAudio(index + 1);
    }

    function changeDemo(inc) {
      idx += inc;
      if (idx < 0) idx = 0;
      if (idx >= demos.length) idx = demos.length - 1;
      renderDemo(idx);
    }

    renderDemo(0);
    document.addEventListener('keydown', (e) => { if(e.key==="ArrowLeft") changeDemo(-1); if(e.key==="ArrowRight") changeDemo(1); });
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
  <title>PRODUCTION MEGAPPAL PROJECT</title>
  <style>
    body {
      background: #15141a;
      color: #eee;
      font-family: 'Montserrat', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      padding: 0 10px 40px 10px;
      box-sizing: border-box;
      overflow-x: hidden;
    }
    .main-card {
      max-width: 1050px;
      width: 100%;
      margin: 40px auto 10px auto;
      border-radius: 16px;
      background: #191a1f;
      box-shadow: 0 4px 32px #000a;
      padding: 32px;
      display: flex;
      align-items: flex-start;
      gap: 40px;
      position: relative;
      box-sizing: border-box;
    }
    .side-left {
      flex: 1;
      display: flex;
      justify-content: center;
    }
    .side-left img {
      max-width: 270px;
      width: 100%;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 2px 14px #0008;
    }
    .side-right {
      flex: 2;
      min-width: 0;
      display: flex;
      flex-direction: column;
      padding-right: 60px;
    }
    .song-title { color: #16f2a0; font-size: 1.8em; font-weight: bold; margin-bottom: 12px; line-height: 1.2; }
    .song-desc { color: #ccc; margin-bottom: 16px; font-size: 1em; }
    .fiche { background: #23232b; border-radius: 14px; padding: 17px 23px; color: #eee; font-size: 1em; margin-top: 18px; word-wrap: break-word; }
    .fiche .lead { color: #16f2a0; font-weight: bold; margin-bottom: 9px; display: block; }

    /* Boutons de navigation */
    .arrow-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: #262636;
      color: #27ffd6;
      border: none;
      border-radius: 50%;
      width: 120px;
      height: 120px;
      font-size: 5em;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10;
    }
    .arrow-btn::after {
      content: ""; position: absolute; top: -10px; left: -10px; right: -10px; bottom: -10px;
      border: 4px solid #27ffd6; border-radius: 50%;
    }
    .arrow-btn.left { left: -60px; }
    .arrow-btn.right { right: -60px; }

    /* Volume et Loader */
    .audio-controls-container {
      position: absolute; top: 20px; right: 20px; z-index: 20; display: flex; align-items: center; gap: 15px;
    }
    .mute-toggle-btn {
      background: #23232b; border: 2px solid #27ffd6; color: #27ffd6; border-radius: 50%;
      width: 60px; height: 60px; font-size: 2em; cursor: pointer; display: flex; align-items: center; justify-content: center;
    }
    .loader {
      width: 30px; height: 30px; border: 3px solid #23232b; border-top: 3px solid #27ffd6;
      border-radius: 50%; animation: spin 1s linear infinite; display: none;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    .footer { text-align: center; color: #aaa; padding: 20px 0; font-weight: 600; }

    /* --- MOBILE --- */
    @media (max-width: 900px) {
      .main-card { flex-direction: column !important; align-items: center !important; padding: 60px 20px 20px 20px; }
      .side-left { width: 100% !important; display: flex !important; justify-content: center !important; margin: 0 auto 10px auto; }
      .side-left img { max-width: 250px !important; margin: 0 auto !important; display: block !important; }
      .side-right { width: 100% !important; padding-right: 0 !important; text-align: left; }
      .arrow-btn { width: 70px; height: 70px; font-size: 2.5em; top: 40%; }
      .arrow-btn::after { top: -5px; left: -5px; right: -5px; bottom: -5px; border-width: 3px; }
      .arrow-btn.left { left: 10px; }
      .arrow-btn.right { right: 10px; }
      .song-title { font-size: 1.4em; text-align: center; }
    }
  </style>
</head>
<body>

  <div id="demo-container"></div>
  <div class="footer">Une production de Megappal Project<br />D√©mos priv√©es ‚Äî acc√®s sur invitation</div>

  <script>
    const demos = [
      { t: "Ici, la musique commence par une histoire.", d: "Chaque chanson est compos√©e sur mesure par <b>Megappal Project</b>.", i: "studio-photo.jpg", s: null, f: "üëâ Appuyez sur la fl√®che pour explorer nos d√©mos" },
      { t: "Rayon de Soleil pour Julie", d: "D√©mo personnalis√©e en fran√ßais pour Julie.", i: "0001-Rayon de Soleil (pour Julie).jpg", s: "0001-Rayon de Soleil (pour Julie).mp3", f: "<b>Personne :</b> Julie Tremblay<br><b>√Çge :</b> 30 ans<br><b>Style :</b> Pop acoustique" },
      { t: "Le Roi du BBQ (pour Sam)", d: "Hommage BBQ pour Sam.", i: "0002-Le Roi du BBQ (pour Sam).jpg", s: "0002-Le Roi du BBQ (pour Sam).mp3", f: "<b>Personne :</b> Samuel Dub√©<br><b>√Çge :</b> 25 ans<br><b>Style :</b> Pop-rock" },
      { t: "Mon Roc, Mon Aventure (pour Marc-Andr√©)", d: "D√©mo d√©di√©e √† Marc-Andr√©.", i: "0003-Mon Roc, Mon Aventure (pour Marc-Andr√©).jpg", s: "0003-Mon Roc, Mon Aventure (pour Marc-Andr√©).mp3", f: "<b>Personne :</b> Marc-Andr√© Lavoie<br><b>√Çge :</b> 40 ans<br><b>Style :</b> Ballade pop" },
      { t: "50 Ans de L√©gende (pour Pat)", d: "D√©mo anniversaire pour Pat.", i: "0004-50 Ans de L√©gende (pour Pat).jpg", s: "0004-50 Ans de L√©gende (pour Pat).mp3", f: "<b>Personne :</b> Patrick Lemieux<br><b>√Çge :</b> 50 ans<br><b>Style :</b> Rock‚Äôn‚Äôroll" },
      { t: "R√™ve Grand, Ma Petite √âtoile (pour Zo√©)", d: "D√©mo magique pour Zo√©.", i: "0005-R√™ve Grand, Ma Petite √âtoile (pour Zo√©).jpg", s: "0005-R√™ve Grand, Ma Petite √âtoile (pour Zo√©).mp3", f: "<b>Personne :</b> Zo√© Fortin<br><b>√Çge :</b> 10 ans<br><b>Style :</b> Pop joyeux" },
      { t: "Caf√© & Lundi (pour Annie)", d: "Rituel de bureau pour Annie.", i: "0006-Caf√© & Lundi (pour Annie).jpg", s: "0006-Caf√© & Lundi (pour Annie).mp3", f: "<b>Personne :</b> Annie Bouchard<br><b>√Çge :</b> 35 ans<br><b>Style :</b> Jazz-swing" },
      { t: "Le Rire des Vagues (pour Jean)", d: "Vagues et souvenirs pour Jean.", i: "0007-Le Rire des Vagues (pour Jean).jpg", s: "0007-Le Rire des Vagues (pour Jean).mp3", f: "<b>Personne :</b> Jean Leblanc<br><b>√Çge :</b> 60 ans<br><b>Style :</b> Folk acoustique" },
      { t: "Le Monde Est √† Toi (pour Clara)", d: "D√©mo motivation pour Clara.", i: "0008-Le Monde Est √† Toi (pour Clara).jpg", s: "0008-Le Monde Est √† Toi (pour Clara).mp3", f: "<b>Personne :</b> Clara C√¥t√©<br><b>√Çge :</b> 18 ans<br><b>Style :</b> Pop √©lectro" },
      { t: "Plus Que Les P√¢tes du Monde (pour M√©lanie)", d: "D√©mo gourmande pour M√©lanie.", i: "0009-Plus Que Les P√¢tes du Monde (pour M√©lanie).jpg", s: "0009-Plus Que Les P√¢tes du Monde (pour M√©lanie).mp3", f: "<b>Personne :</b> M√©lanie Girard<br><b>√Çge :</b> 28 ans<br><b>Style :</b> Pop romantique" },
      { t: "Ma Petite Tornade (pour L√©a)", d: "Tornade d‚Äôamour pour L√©a.", i: "0010-Ma Petite Tornade (pour lea).jpg", s: "0010-Ma Petite Tornade (pour lea).mp3", f: "<b>Personne :</b> L√©a Dion<br><b>√Çge :</b> 5 ans<br><b>Style :</b> Pop enfant" },
      { t: "CR√âEZ VOTRE CADEAU ULTIME.", d: "Un souvenir par <b>Megappal Project</b>.", i: "cta-image.jpg", s: "exit-song.mp3", f: "<div style='background:#27ffd6;padding:15px;border-radius:12px;color:#191a1f;text-align:center;font-weight:900;'>PARLEZ-EN √Ä UN EMPLOY√â !</div>" }
    ];

    const audioObjs = {};
    let currentIdx = 0;
    let isMuted = false;

    function getAudio(i) {
      if (!demos[i] || !demos[i].s) return null;
      if (!audioObjs[i]) {
        const a = new Audio(demos[i].s);
        a.preload = "auto";
        a.addEventListener('waiting', () => { if(document.getElementById('audio-loader')) document.getElementById('audio-loader').style.display = 'block'; });
        a.addEventListener('playing', () => { if(document.getElementById('audio-loader')) document.getElementById('audio-loader').style.display = 'none'; });
        audioObjs[i] = a;
      }
      return audioObjs[i];
    }

    function toggleMute() {
      isMuted = !isMuted;
      const a = getAudio(currentIdx);
      if (a) a.muted = isMuted;
      document.getElementById('mute-btn').textContent = isMuted ? "üîá" : "üîä";
    }

    function render() {
      const d = demos[currentIdx];
      Object.values(audioObjs).forEach(a => { a.pause(); a.currentTime = 0; });

      const controls = d.s ? `<div class="audio-controls-container"><div class="loader" id="audio-loader"></div><button class="mute-toggle-btn" id="mute-btn" onclick="toggleMute()">${isMuted ? "üîá" : "üîä"}</button></div>` : '';

      document.getElementById('demo-container').innerHTML = `
        <div class="main-card">
          <button class="arrow-btn left" onclick="change(-1)" style="visibility:${currentIdx===0?'hidden':'visible'}">&lt;</button>
          ${controls}
          <div class="side-left"><img src="${d.i}" alt="Image"></div>
          <div class="side-right">
            <div class="song-title">${d.t}</div>
            <div class="song-desc">${d.d}</div>
            <div class="fiche">${currentIdx > 0 && currentIdx < 11 ? '<span class="lead">Exemple de fiche personnalis√©e</span>' : ''}${d.f}</div>
          </div>
          <button class="arrow-btn right" onclick="change(1)" style="visibility:${currentIdx===demos.length-1?'hidden':'visible'}">&gt;</button>
        </div>`;

      const audio = getAudio(currentIdx);
      if (audio) { audio.muted = isMuted; audio.play().catch(() => {}); }
      if (currentIdx + 1 < demos.length) getAudio(currentIdx + 1);
    }

    function change(n) {
      currentIdx += n;
      if (currentIdx < 0) currentIdx = 0;
      if (currentIdx >= demos.length) currentIdx = demos.length - 1;
      render();
    }

    render();
    document.addEventListener('keydown', (e) => { if(e.key==="ArrowLeft") change(-1); if(e.key==="ArrowRight") change(1); });
  </script>
</body>
</html>
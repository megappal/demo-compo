<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
  <title>PRODUCTION MEGAPPAL PROJECT</title>
  <style>
    body {
      background: #15141a;
      color: #eee;
      font-family: 'Montserrat', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      padding: 0 10px 40px 10px;
      box-sizing: border-box;
      overflow-x: hidden;
    }
    .main-card {
      max-width: 1050px;
      width: 100%;
      margin: 40px auto 10px auto;
      border-radius: 16px;
      background: #191a1f;
      box-shadow: 0 4px 32px #000a;
      padding: 32px;
      display: flex;
      align-items: flex-start;
      gap: 40px;
      position: relative;
      box-sizing: border-box;
    }
    .side-left {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }
    .side-left img {
      max-width: 270px;
      width: 100%;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 2px 14px #0008;
    }
    .side-right {
      flex: 2;
      min-width: 0;
      display: flex;
      flex-direction: column;
      padding-right: 60px;
    }
    .side-right.cta-align {
        justify-content: center;
    }
    
    .song-title {
      color: #16f2a0;
      font-size: 1.8em;
      font-weight: bold;
      margin-bottom: 12px;
      line-height: 1.2;
    }
    .song-desc {
      color: #ccc;
      margin-bottom: 16px;
      font-size: 1em;
      white-space: normal; /* Respecte ton instruction de retour √† la ligne */
    }
    
    .fiche {
      background: #23232b;
      border-radius: 14px;
      padding: 17px 23px;
      color: #eee;
      font-size: 1em;
      margin-top: 18px;
      box-shadow: 0 2px 20px #0004;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    .fiche .lead {
      color: #16f2a0;
      font-weight: bold;
      margin-bottom: 9px;
      display: block;
    }

    /* Boutons et Audio */
    .arrow-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: #262636;
      color: #27ffd6;
      border: none;
      border-radius: 50%;
      width: 120px;
      height: 120px;
      font-size: 5em;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10;
      transition: background 0.18s;
    }
    .arrow-btn::after {
      content: "";
      position: absolute;
      top: -10px; left: -10px; right: -10px; bottom: -10px;
      border: 4px solid #27ffd6;
      border-radius: 50%;
    }
    .arrow-btn.left { left: -60px; }
    .arrow-btn.right { right: -60px; }

    .audio-controls-container {
      position: absolute;
      top: 20px;
      right: 20px;
      z-index: 20;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .mute-toggle-btn {
      background: #23232b;
      border: 2px solid #27ffd6;
      color: #27ffd6;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 2em;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .loader {
      width: 30px;
      height: 30px;
      border: 3px solid #23232b;
      border-top: 3px solid #27ffd6;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      display: none;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .footer {
      text-align: center;
      color: #aaa;
      padding: 20px 0;
      font-weight: 600;
    }

    /* Styles CTA */
    .cta-columns { display: flex; gap: 20px; text-align: left; margin: 0; max-width: 800px; align-self: center; padding-top: 5px; }
    .cta-columns > div { flex: 1; min-width: 250px; }
    .cta-action { font-size: 1.6em; font-weight: 900; margin: 15px auto !important; padding: 10px 20px; background: #34efb6; color: #191a1f; border-radius: 8px; display: inline-block; box-shadow: 0 4px 10px #0008; }
    .cta-box { margin-top: 15px; padding: 15px 25px; background: #27ffd6; border-radius: 12px; box-shadow: 0 4px 15px #0008; text-align: center; }
    .cta-wrap { word-wrap: break-word; font-style: italic; line-height: 1.3; color: #191a1f; }

    /* --- CORRECTION CENTRAGE MOBILE --- */
    @media (max-width: 1150px) {
      .arrow-btn.left { left: 10px; }
      .arrow-btn.right { right: 10px; }
    }

    @media (max-width: 900px) {
      .main-card { 
        flex-direction: column; 
        padding: 60px 20px 20px 20px; 
        margin-top: 20px; 
        gap: 20px; 
        align-items: center !important; /* Force le centrage de tous les enfants */
        text-align: center;
      }
      .side-left { 
        width: 100%; 
        display: flex !important; 
        justify-content: center !important; 
        margin: 0 auto 10px auto;
      }
      .side-left img { 
        max-width: 220px; 
        margin: 0 auto !important; 
        display: block !important; 
      }
      .side-right { 
        padding-right: 0; 
        width: 100%; 
        text-align: left; /* Texte reste lisible √† gauche */
      }
      .arrow-btn { width: 70px; height: 70px; font-size: 2.5em; top: 40%; }
      .arrow-btn::after { top: -5px; left: -5px; right: -5px; bottom: -5px; border-width: 3px; }
      .song-title { font-size: 1.4em; text-align: center; }
      .cta-columns { flex-direction: column; }
    }
  </style>
</head>
<body>

  <div id="demo-container"></div>
  
  <div class="footer">
    Une production de Megappal Project<br />
    D√©mos priv√©es ‚Äî acc√®s sur invitation
  </div>

  <script>
    const demos = [
      {
        title: "Ici, la musique commence par une histoire.",
        desc: "Chaque chanson est compos√©e sur mesure par <b>Megappal Project</b>, √† partir de d√©tails bien r√©els : une personne, un lien, un moment important.",
        img: "studio-photo.jpg",
        mp3: null,
        fiche: "üëâ Appuyez sur la fl√®che pour explorer nos d√©mos",
      },
      {
        title: "Rayon de Soleil pour Julie",
        desc: "D√©mo personnalis√©e en fran√ßais pour Julie.",
        img: "0001-Rayon de Soleil (pour Julie).jpg",
        mp3: "0001-Rayon de Soleil (pour Julie).mp3",
        fiche: `<b>Personne f√™t√©e :</b> Julie Tremblay<br><b>√Çge c√©l√©br√© :</b> 30 ans<br><b>Sexe :</b> F√©minin<br><b>Relation :</b> S≈ìur<br><b>Command√© par :</b> Marie Tremblay<br><b>√âv√©nement :</b> 30e anniversaire surprise<br><b>Style musical :</b> Pop acoustique<br><b>Ambiance :</b> √âmotive et joyeuse<br><b>Langue :</b> Fran√ßais<br><b>D√©tails :</b> Adore les voyages, le vin rouge, et son chat L√©o. Vit √† Qu√©bec.<br><b>Message sp√©cial :</b> ‚ÄúNe change jamais, tu es notre rayon de soleil.‚Äù`,
      },
      // ... (les autres d√©mos restent identiques au code pr√©c√©dent)
      {
        title: "CR√âEZ VOTRE CADEAU ULTIME.",
        desc: "La chanson sur mesure, un souvenir qui dure pour toujours.",
        img: "cta-image.jpg",
        mp3: "exit-song.mp3",
        fiche: `
            <div class="cta-columns">
                <div class="column-left">
                    <h3 style="margin: 0 0 5px 0; color: #16f2a0;">Pourquoi choisir une chanson sur mesure ?</h3>
                    <ul style="list-style: none; padding-left: 0; padding-top: 0; margin: 0;">
                        <li><strong>‚òÖ 100% Personnalis√© :</strong> Votre histoire en musique.</li>
                        <li><strong>‚òÖ Unicit√© Garantie :</strong> Une ≈ìuvre originale par <strong>Megappal Project</strong>.</li>
                        <li><strong>‚òÖ Le Cadeau qui Touche :</strong> Attention in√©gal√©e.</li>
                    </ul>
                </div>
                <div class="column-right">
                    <h3 style="margin: 0 0 5px 0; color: #16f2a0;">Le processus est simple</h3>
                    <ol style="text-align: left; padding-left: 25px; margin: 30px 0 0 0;">
                        <li><strong>Achetez le service.</strong></li>
                        <li><strong>Remplissez le Formulaire.</strong></li>
                        <li><strong>R√©ception MP3.</strong></li>
                    </ol>
                </div>
            </div>
            <div class="cta-box">
                <p class="cta-action">PARLEZ-EN √Ä UN EMPLOY√â !</p>
                <p class="cta-wrap">Il vous guidera pour l'achat de votre composition personnalis√©e.</p>
            </div>
        `,
      }
    ];

    const audioObjects = {};
    let idx = 0;
    let isGlobalMuted = false;

    function getAudio(index) {
      if (!demos[index] || !demos[index].mp3) return null;
      if (!audioObjects[index]) {
        const audio = new Audio();
        audio.preload = "auto";
        audio.src = demos[index].mp3;
        audio.addEventListener('waiting', () => { if(document.getElementById('audio-loader')) document.getElementById('audio-loader').style.display = 'block'; });
        audio.addEventListener('playing', () => { if(document.getElementById('audio-loader')) document.getElementById('audio-loader').style.display = 'none'; });
        audio.addEventListener('canplaythrough', () => { if(document.getElementById('audio-loader')) document.getElementById('audio-loader').style.display = 'none'; });
        audio.load();
        audioObjects[index] = audio;
      }
      return audioObjects[index];
    }

    function toggleMute() {
      isGlobalMuted = !isGlobalMuted;
      const current = getAudio(idx);
      const btn = document.getElementById('mute-btn');
      if (current) current.muted = isGlobalMuted;
      if (btn) btn.textContent = isGlobalMuted ? "üîá" : "üîä";
    }

    function renderDemo(index) {
      const d = demos[index];
      Object.values(audioObjects).forEach(a => { a.pause(); a.currentTime = 0; });

      const audioControls = d.mp3 ? `
        <div class="audio-controls-container">
          <div class="loader" id="audio-loader"></div>
          <button class="mute-toggle-btn" id="mute-btn" onclick="toggleMute()">${isGlobalMuted ? "üîá" : "üîä"}</button>
        </div>` : '';

      const contentHtml = `
        <div class="main-card">
          <button class="arrow-btn left" onclick="changeDemo(-1)">&lt;</button>
          ${audioControls}
          <div class="side-left"><img src="${d.img}" alt="${d.title}"></div>
          <div class="side-right ${!d.mp3 ? 'cta-align' : ''}">
            <div class="song-title">${d.title}</div>
            <div class="song-desc">${d.desc}</div>
            <div class="fiche">${index === 0 ? d.fiche : (d.mp3 ? (index === demos.length - 1 ? d.fiche : `<span class="lead">Exemple de fiche de cr√©ation personnalis√©e</span>${d.fiche}`) : d.fiche)}</div>
          </div>
          <button class="arrow-btn right" onclick="changeDemo(1)">&gt;</button>
        </div>`;

      document.getElementById('demo-container').innerHTML = contentHtml;
      document.querySelector('.arrow-btn.left').style.visibility = (index === 0) ? 'hidden' : 'visible';
      document.querySelector('.arrow-btn.right').style.visibility = (index === demos.length - 1) ? 'hidden' : 'visible';

      const currentAudio = getAudio(index);
      if (currentAudio) {
        currentAudio.muted = isGlobalMuted;
        currentAudio.play().catch(e => console.log("Interaction requise"));
      }
      if (index + 1 < demos.length) getAudio(index + 1);
    }

    function changeDemo(inc) {
      idx += inc;
      if (idx < 0) idx = 0;
      if (idx >= demos.length) idx = demos.length - 1;
      renderDemo(idx);
    }

    renderDemo(0);
    document.addEventListener('keydown', (e) => {
      if(e.key==="ArrowLeft") changeDemo(-1);
      if(e.key==="ArrowRight") changeDemo(1);
    });
  </script>
</body>
</html>